var mode = {
	java: [
		"Java",
		"ace/mode/java",
		"java"
	],
	html: [
		"HTML",
		"ace/mode/html",
		"html"
	],
	json: [
		"Json",
		"ace/mode/json",
		"json"
	],
	xml: [
		"XML",
		"ace/mode/xml",
		"xml"
	],
	css: [
		"Css",
		"ace/mode/css",
		"css"
	],
	csharp: [
		"C#",
		"ace/mode/csharp",
		"csharp"
	],
	cpp: [
		"CPP",
		"ace/mode/c_cpp",
		"c_cpp"
	],
	javascript: [
		"JavaScript",
		"ace/mode/javascript",
		"javascript"
	],
	sql: [
		"SQL",
		"ace/mode/sql",
		"sql"
	],
	text: [
		"Text",
		"ace/mode/text",
		"text"
	],
	php: [
		"PHP",
		"ace/mode/php",
		"php"
	],
	apache_conf: [
		"Apache Conf",
		"ace/mode/apache_conf",
		"apache_conf"
	],
	assembly_x86: [
		"Assembly x86",
		"ace/mode/assembly_x86",
		"assembly_x86"
	],
	batchfile: [
		"Batchfile",
		"ace/mode/batchfile",
		"batchfile"
	],
	cobol: [
		"Cobol",
		"ace/mode/cobol",
		"cobol"
	],
	dart: [
		"Dart",
		"ace/mode/dart",
		"dart"
	],
	fortran: [
		"Fortran",
		"ace/mode/fortran",
		"fortran"
	],
	fsharp: [
		"Fsharp",
		"ace/mode/fsharp",
		"fsharp"
	],
	jsp: [
		"jsp",
		"ace/mode/jsp",
		"jsp"
	],
	kotlin: [
		"Kotlin",
		"ace/mode/kotlin",
		"kotlin"
	],
	less: [
		"Less",
		"ace/mode/less",
		"less"
	],
	mysql: [
		"MySQL",
		"ace/mode/mysql",
		"mysql"
	],
	markdown: [
		"Markdown",
		"ace/mode/markdown",
		"markdown"
	],
	objectviec: [
		"Objective C",
		"ace/mode/objectviec",
		"objectviec"
	],
	perl: [
		"Perl",
		"ace/mode/perl",
		"perl"
	],
	php_laravel_blade: [
		"Php Laravel Blade",
		"ace/mode/php_laravel_blade",
		"php_laravel_blade"
	],
	plain_text: [
		"Plain Text",
		"ace/mode/plain_text",
		"plain_text"
	],
	powershell: [
		"Power Shell",
		"ace/mode/powershell",
		"powershell"
	],
	python: [
		"Python",
		"ace/mode/python",
		"python"
	],
	ruby: [
		"Ruby",
		"ace/mode/ruby",
		"ruby"
	],
	scheme: [
		"Scheme",
		"ace/mode/scheme",
		"scheme"
	],
	svg: [
		"Svg",
		"ace/mode/svg",
		"svg"
	],
	twig: [
		"Twig",
		"ace/mode/twig",
		"twig"
	],
	vbscript: [
		"VB Script",
		"ace/mode/vbscript",
		"vbscript"
	]
};

var theme = {
	twilight: [
		"Twilight",
		"ace/theme/twilight",
		"twilight"
	],
	xcode: [
		"X Code",
		"ace/theme/xcode",
		"xcode"
	],
	ambiance: [
		"Ambiance",
		"ace/theme/ambiance",
		"ambiance"
	],
	chaos: [
		"Chaos",
		"ace/theme/chaos",
		"chaos"
	],
	chrome: [
		"Chrome",
		"ace/theme/chrome",
		"chrome"
	],
	clouds: [
		"Clouds",
		"ace/theme/clouds",
		"clouds"
	],
	clouds_midnight: [
		"Clouds midnight",
		"ace/theme/clouds_midnight",
		"clouds_midnight"
	],
	cobalt: [
		"Cobalt",
		"ace/theme/cobalt",
		"cobalt"
	],
	crimson_editor: [
		"Crimson editor",
		"ace/theme/crimson_editor",
		"crimson_editor"
	],
	dawn: [
		"Dawn",
		"ace/theme/dawn",
		"dawn"
	],
	dracula: [
		"Dracula",
		"ace/theme/dracula",
		"dracula"
	],
	dreamweaver: [
		"Dreamweaver",
		"ace/theme/dreamweaver",
		"dreamweaver"
	],
	eclipse: [
		"Eclipse",
		"ace/theme/eclipse",
		"eclipse"
	],
	github: [
		"Github",
		"ace/theme/github",
		"github"
	],
	gob: [
		"Gob",
		"ace/theme/gob",
		"gob"
	],
	gruvbox: [
		"Gruvbox",
		"ace/theme/gruvbox",
		"gruvbox"
	],
	idle_fingers: [
		"Idle Fingers",
		"ace/theme/idle_fingers",
		"idle_fingers"
	],
	iplastic: [
		"Iplastic",
		"ace/theme/iplastic",
		"iplastic"
	],
	katzenmilch: [
		"Katzenmilch",
		"ace/theme/katzenmilch",
		"katzenmilch"
	],
	kr_theme: [
		"Kr Theme",
		"ace/theme/kr_theme",
		"kr_theme"
	],
	kuroir: [
		"Kuroir",
		"ace/theme/kuroir",
		"kuroir"
	],
	merbivore: [
		"Merbivore",
		"ace/theme/merbivore",
		"merbivore"
	],
	merbivore_soft: [
		"Merbivore Soft",
		"ace/theme/merbivore_soft",
		"merbivore_soft"
	],
	monokai: [
		"Monokai",
		"ace/theme/monokai",
		"monokai"
	],
	pastel_on_dark: [
		"Pastel Dn Dark",
		"ace/theme/pastel_on_dark",
		"pastel_on_dark"
	],
	solarized_dark: [
		"Solarized Dark",
		"ace/theme/solarized_dark",
		"solarized_dark"
	],
	solarized_light: [
		"Solarized Light",
		"ace/theme/solarized_light",
		"solarized_light"
	],
	sqlserver: [
		"SQLServer",
		"ace/theme/sqlserver",
		"sqlserver"
	],
	terminal: [
		"Terminal",
		"ace/theme/terminal",
		"terminal"
	],
	textmate: [
		"Textmate",
		"ace/theme/textmate",
		"textmate"
	],
	tomorrow: [
		"Tomorrow",
		"ace/theme/tomorrow",
		"tomorrow"
	],
	tomorrow_night: [
		"Tomorrow Night",
		"ace/theme/tomorrow_night",
		"tomorrow_night"
	],
	tomorrow_night_blue: [
		"Tomorrow Night Blue",
		"ace/theme/tomorrow_night_blue",
		"tomorrow_night_blue"
	],
	tomorrow_night_bright: [
		"Tomorrow Night Bright",
		"ace/theme/tomorrow_night_bright",
		"tomorrow_night_bright"
	],
	tomorrow_night_eighties: [
		"Tomorrow Night Eighties",
		"ace/theme/tomorrow_night_eighties",
		"tomorrow_night_eighties"
	],
	vibrant_ink: [
		"Vbrant Ink",
		"ace/theme/vibrant_ink",
		"vibrant_ink"
	]
};

var dialogList = function (arr, type) {
	var tmp = '<ul class="list-group">';
	$.each(arr, function (key, value) {
		tmp += '<li class="list-group-item">'+
			'<div style="float: left;">' + 
				'<button type="button" style="border-color: transparent; background: transparent;" class="btn btn-default btn-sm" title="' + value[0] + '">' +
						value[0] +
					'</button>'+
			'</div>' + 
			'<div style="float: right;">' +
				'<button type="button" class="btn btn-outline-info btn-sm" title="Save" onclick="changeEditorConfig(\'' + value[1] + '\', \'' + type + '\');">' +
						'<span class="glyphicon glyphicon-save" style="margin-right: 5px;"></span>Select' +
					'</button>'+
			'</div>'+
		'</li>';
	});
	return tmp;
}

editor.commands.addCommand({
	name: 'fileFormat',
	bindKey: {win: 'Ctrl-Shift-p',  mac: 'Command-Shift-p'},
	exec: function(editor) {
		bootbox.dialog({
			message: dialogList(mode, "language"),
			onEscape: true,
			backdrop: true,
			closeButton: false
		});
	},
	readOnly: true
});

editor.commands.addCommand({
	name: 'themeDesign',
	bindKey: {win: 'Ctrl-Alt-t',  mac: 'Command-Alt-t'},
	exec: function(editor) {
		bootbox.dialog({
			message: dialogList(theme, 'theme'),
			onEscape: true,
			backdrop: true,
			closeButton: false
		});
	},
	readOnly: true
});

editor.commands.addCommand({
	name: 'fontSizeIncrease',
	bindKey: {win: 'Ctrl-Shift-f',  mac: 'Command-Shift-f'},
	exec: function(editor) {
		if(fontSize < 72){
			fontSize++;
		}
		editor.setOption(
			"fontSize", fontSize
		);
		$('#fontSize').slider('setValue', fontSize);
	},
	readOnly: true
});

editor.commands.addCommand({
	name: 'fontSizeDecrease',
	bindKey: {win: 'Ctrl-Shift-h',  mac: 'Command-Shift-h'},
	exec: function(editor) {
		if(fontSize > 12){
			fontSize--;
		}
		editor.setOption(
			"fontSize", fontSize
		);
		$('#fontSize').slider('setValue', fontSize);
	},
	readOnly: true
});

function changeEditorConfig(path, type) {
	if(type === "language") {
		editor.session.setMode(path);
	} else if(type === "theme") {
		editor.setTheme(path);
	}
	bootbox.hideAll();
	editor.focus();
}